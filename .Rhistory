donF=don %>%
tidyr::gather(key = 'info',value = 'value',contains('info')) %>%
mutate(value=str_remove(value,'_A11')) %>%
tidyr::separate(col = value,into = c('sensor','tension'),sep = '_') %>%
mutate(tension=as.numeric(tension),
DATA=file)
donF=merge(donF,tableSlot)
allDat=rbind(allDat,donF)
}
# donF %>%
#   filter(variable %in% c('PAR','FR','Battery','Temperature')) %>%
#   mutate(tension=ifelse(sensor=='T3 S1',tension*coefFR,tension)) %>%
#   mutate(tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension)) %>%
#   ggplot(aes(x=time,y=tension,col=sensor))+
#   geom_line()+
#   facet_wrap(~variable,scale='free_y')+
#   scale_x_datetime()+
#   labs(y='')
ggplotly(allDat %>%
filter(variable %in% c('PAR')) %>%
mutate(tension=ifelse(sensor=='T3 S1',tension*coefFR,tension)) %>%
mutate(tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension)) %>%
ggplot(aes(x=time,y=tension,col=sensor))+
geom_line()+
facet_wrap(~variable,scale='free_y')+
scale_x_datetime()+
labs(y=''))
ggplotly(allDat %>%
filter(variable %in% c('PAR')) %>%
mutate(tension=ifelse(sensor=='T3 S1',tension*coefFR,tension)) %>%
mutate(tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension)) %>%
ggplot(aes(x=time,y=tension,col=sensor,groupe=DATA))+
geom_line()+
facet_wrap(~variable,scale='free_y')+
scale_x_datetime()+
labs(y=''))
donPlot=allDat %>%
filter(variable %in% c('PAR','FR','Battery','Temperature')) %>%
mutate(tension=ifelse(sensor=='T3 S1',tension*coefFR,tension)) %>%
mutate(tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension))
ggplotly(
ggplot()+
geom_line(data=donPlot %>% filter(variable=='PAR'),aes(x=time,y=tension,col=sensor,group=DATA,col=PAR))+
# facet_wrap(~variable,scale='free_y')+
scale_x_datetime()+
labs(y=))
View(donPlot)
ggplotly(
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=time,y=tension,col=variable))+
# facet_wrap(~variable,scale='free_y')+
scale_x_datetime()+
labs(y=))
donPlot %>% filter(variable %in% c('PAR','FR'))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=time,y=tension,col=variable))+
# facet_wrap(~variable,scale='free_y')+
scale_x_datetime()
ggplotly(
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=time,y=tension,col=variable))+
# facet_wrap(~variable,scale='free_y')+
scale_x_datetime()+
labs(y=expression(mu*'mol photon'* m**-2* s**-1)))
ylab(expression ('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
ggplotly(
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=time,y=tension,col=variable))+
# facet_wrap(~variable,scale='free_y')+
scale_x_datetime()+
ylab(expression ('PFD '*(mu*mol*' '*m**-2*' '*s**-1))))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=time,y=tension,col=variable))+
# facet_wrap(~variable,scale='free_y')+
scale_x_datetime()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=time,y=tension,col=variable))+
facet_wrap(~Date,scale='free_y')+
scale_x_datetime()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=time,y=tension,col=variable))+
facet_wrap(~day(time),scale='free_y')+
scale_x_datetime()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=time,y=tension,col=variable))+
facet_wrap(~day(time),scale='free_y')+
scale_x_datetime(scale='free_x')+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=time,y=tension,col=variable))+
facet_wrap(~day(time),scale='free_y')+
scale_x_datetime(scales='free_x')+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=time,y=tension,col=variable))+
facet_wrap(~day(time),scale='free_x')+
scale_x_datetime()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
donPlot=allDat %>%
filter(variable %in% c('PAR','FR','Battery','Temperature')) %>%
mutate(Date=day(time),
tension=ifelse(sensor=='T3 S1',tension*coefFR,tension),
tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=time,y=tension,col=variable))+
facet_wrap(~Date,scale='free_x')+
scale_x_datetime()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
View(donPlot)
donPlot=allDat %>%
filter(variable %in% c('PAR','FR','Battery','Temperature')) %>%
mutate(Date=dmy(time),
tension=ifelse(sensor=='T3 S1',tension*coefFR,tension),
tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=time,y=tension,col=variable))+
facet_wrap(~Date,scale='free_x')+
scale_x_datetime()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
donPlot=allDat %>%
filter(variable %in% c('PAR','FR','Battery','Temperature')) %>%
mutate(Date=Date(time),
tension=ifelse(sensor=='T3 S1',tension*coefFR,tension),
tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension))
donPlot=allDat %>%
filter(variable %in% c('PAR','FR','Battery','Temperature')) %>%
mutate(Date=str_sub(time,1,12),
tension=ifelse(sensor=='T3 S1',tension*coefFR,tension),
tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=time,y=tension,col=variable))+
facet_wrap(~Date,scale='free_x')+
scale_x_datetime()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
donPlot=allDat %>%
filter(variable %in% c('PAR','FR','Battery','Temperature')) %>%
mutate(Date=str_sub(time,1,10),
tension=ifelse(sensor=='T3 S1',tension*coefFR,tension),
tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=time,y=tension,col=variable))+
facet_wrap(~Date,scale='free_x')+
scale_x_datetime()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
donPlot=allDat %>%
filter(variable %in% c('PAR','FR','Battery','Temperature')) %>%
mutate(Date=str_sub(time,1,10),
hms=hms(str_sub(time,12,19)),
tension=ifelse(sensor=='T3 S1',tension*coefFR,tension),
tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=hms,y=tension,col=variable))+
facet_wrap(~Date,scale='free_x')+
scale_x_datetime()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=hms,y=tension,col=variable))+
facet_wrap(~Date,scale='free_x')+
scale_x_time()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=hms,y=tension,col=variable))+
facet_wrap(~Date)+
scale_x_time()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
donT
# SCRITP TO READ AND VISUALIZE THE DATA OF PAR SENSORS FROM THE PH --------
### R. PEREZ, 16 Mai 2024
# Load packages -----------------------------------------------------------
packs <- c("lubridate", "stringr", 'tidyverse','viridis','data.table','cowplot','plotly')
InstIfNec<-function (pack) {
if (!do.call(require,as.list(pack))) {
do.call(install.packages,as.list(pack))  }
do.call(require,as.list(pack)) }
lapply(packs, InstIfNec)
# inputs ------------------------------------------------------------------
### Apogee sensors coefficients
coefPAR=71.0 #micromol.m-2.s-1 per mV
coefFR=51.45 #micromol.m-2.s-1 per mV
## vector of info names in the RawData column
nbSlots=7
names=paste0(c('slot','value'),rep(x = c(1:nbSlots),each=2))
vecName= c('station',names,'E')
tableSlot=data.frame(sensor=c("T0 S2","T1 S3","T2 S1","T3 S1","T4 S1","T5 S1","T6 S1"),
variable=c('Battery','Temperature','PAR','FR','-','--','---'))
## start time
donT=data.table::fread(input = '0-data/PAR Time.csv') %>%
mutate(start=dmy_hms(paste0(`Day of setting`,'_',`Setting Time`,':00')),
end=dmy_hms(paste0(`Day of taking`,'_',`Taking time`,':00'))) %>%
data.frame()
# load the data -----------------------------------------------------------
allDat=NULL #init
files=list.files(path = '0-data/',pattern = 'DATA')
for (file in files){
# file=files[1]
TimeStart=ymd_hms(donT[donT$File==str_remove(file,'.CSV'),'start'])
don_raw=data.table::fread(input = paste0('0-data/',file)) %>%
mutate(time=TimeStart+Timestamp,
ref=str_sub(RawData,start=4,end=str_length(RawData)-1)) %>%
tidyr::separate(col = ref,into =vecName ,sep='#')
don=don_raw %>% select(ID,Timestamp,Days,Hours,Minutes,time,RawData)
for (i in 1: nbSlots){
dsub=don_raw %>%
mutate(info=paste(get(paste0('slot',i)),get(paste0('value',i))))
colnames(dsub)[colnames(dsub)=='info']=paste0('info',i)
don=cbind(don,dsub %>%
select(paste0('info',i)))
}
donF=don %>%
tidyr::gather(key = 'info',value = 'value',contains('info')) %>%
mutate(value=str_remove(value,'_A11')) %>%
tidyr::separate(col = value,into = c('sensor','tension'),sep = '_') %>%
mutate(tension=as.numeric(tension),
DATA=file)
donF=merge(donF,tableSlot)
allDat=rbind(allDat,donF)
}
# donF %>%
#   filter(variable %in% c('PAR','FR','Battery','Temperature')) %>%
#   mutate(tension=ifelse(sensor=='T3 S1',tension*coefFR,tension)) %>%
#   mutate(tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension)) %>%
#   ggplot(aes(x=time,y=tension,col=sensor))+
#   geom_line()+
#   facet_wrap(~variable,scale='free_y')+
#   scale_x_datetime()+
#   labs(y='')
donPlot=allDat %>%
filter(variable %in% c('PAR','FR','Battery','Temperature')) %>%
mutate(Date=str_sub(time,1,10),
hms=hms(str_sub(time,12,19)),
tension=ifelse(sensor=='T3 S1',tension*coefFR,tension),
tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=hms,y=tension,col=variable))+
facet_wrap(~Date)+
scale_x_time()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
donPlot %>%
ggplot(aes(x=time,y=tension,col=variable,group=DATA))+
geom_line()+
scale_x_datetime()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
donPlot%>% filter(variable %in% c('PAR','FR')) %>%
ggplot(aes(x=time,y=tension,col=variable,group=DATA))+
geom_line()+
scale_x_datetime()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
file='DATA_'
TimeStart
file=files[1]
TimeStart=ymd_hms(donT[donT$File==str_remove(file,'.CSV'),'start'])
TimeStart
file='DATA_'
don_raw=data.table::fread(input = paste0('0-data/',file)) %>%
mutate(time=TimeStart+Timestamp,
ref=str_sub(RawData,start=4,end=str_length(RawData)-1)) %>%
tidyr::separate(col = ref,into =vecName ,sep='#')
file='DATA_.CSV'
don_raw=data.table::fread(input = paste0('0-data/',file)) %>%
mutate(time=TimeStart+Timestamp,
ref=str_sub(RawData,start=4,end=str_length(RawData)-1)) %>%
tidyr::separate(col = ref,into =vecName ,sep='#')
don=don_raw %>% select(ID,Timestamp,Days,Hours,Minutes,time,RawData)
for (i in 1: nbSlots){
dsub=don_raw %>%
mutate(info=paste(get(paste0('slot',i)),get(paste0('value',i))))
colnames(dsub)[colnames(dsub)=='info']=paste0('info',i)
don=cbind(don,dsub %>%
select(paste0('info',i)))
}
donF=don %>%
tidyr::gather(key = 'info',value = 'value',contains('info')) %>%
mutate(value=str_remove(value,'_A11')) %>%
tidyr::separate(col = value,into = c('sensor','tension'),sep = '_') %>%
mutate(tension=as.numeric(tension),
DATA=file)
donF=merge(donF,tableSlot)
ggplot()+
geom_line(data=donF %>% filter(variable %in% c('PAR','FR')),aes(x=hms,y=tension,col=variable))+
facet_wrap(~Date)+
scale_x_time()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
donF%>% filter(variable %in% c('PAR','FR')) %>%
ggplot(aes(x=time,y=tension,col=variable,group=DATA))+
geom_line()+
scale_x_datetime()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
# SCRITP TO READ AND VISUALIZE THE DATA OF PAR SENSORS FROM THE PH --------
### R. PEREZ, 16 Mai 2024
# Load packages -----------------------------------------------------------
packs <- c("lubridate", "stringr", 'tidyverse','viridis','data.table','cowplot','plotly')
InstIfNec<-function (pack) {
if (!do.call(require,as.list(pack))) {
do.call(install.packages,as.list(pack))  }
do.call(require,as.list(pack)) }
lapply(packs, InstIfNec)
# inputs ------------------------------------------------------------------
### Apogee sensors coefficients
coefPAR=71.0 #micromol.m-2.s-1 per mV
coefFR=51.45 #micromol.m-2.s-1 per mV
## vector of info names in the RawData column
nbSlots=7
names=paste0(c('slot','value'),rep(x = c(1:nbSlots),each=2))
vecName= c('station',names,'E')
tableSlot=data.frame(sensor=c("T0 S2","T1 S3","T2 S1","T3 S1","T4 S1","T5 S1","T6 S1"),
variable=c('Battery','Temperature','PAR','FR','-','--','---'))
## start time
donT=data.table::fread(input = '0-data/PAR Time.csv') %>%
mutate(start=dmy_hms(paste0(`Day of setting`,'_',`Setting Time`,':00')),
end=dmy_hms(paste0(`Day of taking`,'_',`Taking time`,':00'))) %>%
data.frame()
# load the data -----------------------------------------------------------
allDat=NULL #init
files=list.files(path = '0-data/',pattern = 'DATA')
for (file in files){
# file=files[1]
TimeStart=ymd_hms(donT[donT$File==str_remove(file,'.CSV'),'start'])
don_raw=data.table::fread(input = paste0('0-data/',file)) %>%
mutate(time=TimeStart+Timestamp,
ref=str_sub(RawData,start=4,end=str_length(RawData)-1)) %>%
tidyr::separate(col = ref,into =vecName ,sep='#')
don=don_raw %>% select(ID,Timestamp,Days,Hours,Minutes,time,RawData)
for (i in 1: nbSlots){
dsub=don_raw %>%
mutate(info=paste(get(paste0('slot',i)),get(paste0('value',i))))
colnames(dsub)[colnames(dsub)=='info']=paste0('info',i)
don=cbind(don,dsub %>%
select(paste0('info',i)))
}
donF=don %>%
tidyr::gather(key = 'info',value = 'value',contains('info')) %>%
mutate(value=str_remove(value,'_A11')) %>%
tidyr::separate(col = value,into = c('sensor','tension'),sep = '_') %>%
mutate(tension=as.numeric(tension),
DATA=file)
donF=merge(donF,tableSlot)
allDat=rbind(allDat,donF)
}
# donF %>%
#   filter(variable %in% c('PAR','FR','Battery','Temperature')) %>%
#   mutate(tension=ifelse(sensor=='T3 S1',tension*coefFR,tension)) %>%
#   mutate(tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension)) %>%
#   ggplot(aes(x=time,y=tension,col=sensor))+
#   geom_line()+
#   facet_wrap(~variable,scale='free_y')+
#   scale_x_datetime()+
#   labs(y='')
donPlot=allDat %>%
filter(variable %in% c('PAR','FR','Battery','Temperature')) %>%
mutate(Date=str_sub(time,1,10),
hms=hms(str_sub(time,12,19)),
tension=ifelse(sensor=='T3 S1',tension*coefFR,tension),
tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension))
donPlot%>% filter(variable %in% c('PAR','FR')) %>%
ggplot(aes(x=time,y=tension,col=variable,group=DATA))+
geom_line()+
scale_x_datetime()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
ggplotly(donPlot%>% filter(variable %in% c('PAR','FR')) %>%
ggplot(aes(x=time,y=tension,col=variable,group=DATA))+
geom_line()+
scale_x_datetime()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1))))
ggplotly(donPlot%>% filter(variable %in% c('PAR','FR')) %>%
ggplot(aes(x=time,y=tension,col=variable,group=DATA))+
geom_line()+
scale_x_datetime())
ggplot()+
geom_line(data=donF %>% filter(variable %in% c('PAR','FR')),aes(x=hms,y=tension,col=variable))+
facet_wrap(~Date)+
scale_x_time()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
ggplot()+
geom_line(data=donPlot %>% filter(variable %in% c('PAR','FR')),aes(x=hms,y=tension,col=variable))+
facet_wrap(~Date)+
scale_x_time()+
ylab(expression('PFD '*(mu*mol*' '*m**-2*' '*s**-1)))
donPlot %>%
filter(variable %in% c('PAR','FR','Battery','Temperature')) %>%
mutate(tension=ifelse(sensor=='T3 S1',tension*coefFR,tension)) %>%
mutate(tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension)) %>%
ggplot(aes(x=time,y=tension,col=sensor))+
geom_line()+
facet_wrap(~variable,scale='free_y')+
scale_x_datetime()+
labs(y='')
donPlot %>%
filter(variable %in% c('PAR','FR','Battery','Temperature')) %>%
mutate(tension=ifelse(sensor=='T3 S1',tension*coefFR,tension)) %>%
mutate(tension=ifelse(sensor=='T2 S1',tension*coefPAR,tension)) %>%
ggplot(aes(x=time,y=tension,col=sensor,group=DATA))+
geom_line()+
facet_wrap(~variable,scale='free_y')+
scale_x_datetime()+
labs(y='')
donPlot%>% filter(variable=='PAR') %>%
mutate(PAR=tension) %>%
select(Date,time,hms,PAR,DATA)
merge(donPlot%>% filter(variable=='PAR') %>%
mutate(PAR=tension) %>%
select(Date,time,hms,PAR,DATA),
donPlot%>% filter(variable=='FR') %>%
mutate(FR=tension) %>%
select(Date,time,hms,FR,DATA)) %>%
mutate(ratio=FR/(FR+PAR))
merge(donPlot%>% filter(variable=='PAR') %>%
mutate(PAR=tension) %>%
select(Date,time,hms,PAR,DATA),
donPlot%>% filter(variable=='FR') %>%
mutate(FR=tension) %>%
select(Date,time,hms,FR,DATA)) %>%
mutate(ratio=FR/(FR+PAR)) %>%
ggplot(aes(x=hms,y=ratio,col=Date))+
scale_x_time()
merge(donPlot%>% filter(variable=='PAR') %>%
mutate(PAR=tension) %>%
select(Date,time,hms,PAR,DATA),
donPlot%>% filter(variable=='FR') %>%
mutate(FR=tension) %>%
select(Date,time,hms,FR,DATA)) %>%
mutate(ratio=FR/(FR+PAR))
donPlot%>% filter(variable=='FR')
merge(donPlot%>% filter(variable=='PAR') %>%
mutate(PAR=tension) %>%
select(Date,time,hms,PAR,DATA),
donPlot%>% filter(variable=='FR') %>%
mutate(FR=tension) %>%
select(Date,time,hms,FR,DATA))
merge(donPlot%>% filter(variable=='PAR') %>%
mutate(PAR=tension) %>%
select(Date,time,hms,PAR),
donPlot%>% filter(variable=='FR') %>%
mutate(FR=tension) %>%
select(Date,time,hms,FR)) %>%
mutate(ratio=FR/(FR+PAR)) %>%
ggplot(aes(x=hms,y=ratio,col=Date))+
scale_x_time()
merge(donPlot%>% filter(variable=='PAR') %>%
mutate(PAR=tension) %>%
select(Date,time,hms,PAR),
donPlot%>% filter(variable=='FR') %>%
mutate(FR=tension) %>%
select(Date,time,hms,FR)) %>%
mutate(ratio=FR/(FR+PAR)) %>%
ggplot(aes(x=hms,y=ratio,col=Date))+
geom_line()+
scale_x_time()
merge(donPlot%>% filter(variable=='PAR') %>%
mutate(PAR=tension) %>%
select(Date,time,hms,PAR),
donPlot%>% filter(variable=='FR') %>%
mutate(FR=tension) %>%
select(Date,time,hms,FR)) %>%
mutate(ratio=FR/(FR+PAR))
merge(donPlot%>% filter(variable=='PAR') %>%
mutate(PAR=tension) %>%
select(Date,time,hms,PAR),
donPlot%>% filter(variable=='FR') %>%
mutate(FR=tension) %>%
select(Date,time,hms,FR)) %>%
filter(PAR+FR>0) %>%
mutate(ratio=FR/(FR+PAR)) %>%
ggplot(aes(x=hms,y=ratio,col=Date))+
geom_line()+
scale_x_time()
merge(donPlot%>% filter(variable=='PAR') %>%
mutate(PAR=tension) %>%
select(Date,time,hms,PAR),
donPlot%>% filter(variable=='FR') %>%
mutate(FR=tension) %>%
select(Date,time,hms,FR)) %>%
filter(FR>0) %>%
mutate(ratio=FR/(FR+PAR)) %>%
ggplot(aes(x=hms,y=ratio,col=Date))+
geom_line()+
scale_x_time()
merge(donPlot%>% filter(variable=='PAR') %>%
mutate(PAR=tension) %>%
select(Date,time,hms,PAR),
donPlot%>% filter(variable=='FR') %>%
mutate(FR=tension) %>%
select(Date,time,hms,FR)) %>%
filter(FR>0 & PAR>0) %>%
mutate(ratio=FR/(FR+PAR)) %>%
ggplot(aes(x=hms,y=ratio,col=Date))+
geom_line()+
scale_x_time()
merge(donPlot%>% filter(variable=='PAR') %>%
mutate(PAR=tension) %>%
select(Date,time,hms,PAR),
donPlot%>% filter(variable=='FR') %>%
mutate(FR=tension) %>%
select(Date,time,hms,FR)) %>%
filter(FR>0 & PAR>0) %>%
mutate(ratio=FR/(FR+PAR)) %>%
ggplot(aes(x=hms,y=ratio,group=Date))+
geom_line()+
scale_x_time()
merge(donPlot%>% filter(variable=='PAR') %>%
mutate(PAR=tension) %>%
select(Date,time,hms,PAR),
donPlot%>% filter(variable=='FR') %>%
mutate(FR=tension) %>%
select(Date,time,hms,FR)) %>%
filter(FR>0 & PAR>0) %>%
mutate(ratio=FR/(FR+PAR)) %>%
ggplot(aes(x=hms,y=ratio,group=Date,col=PAR))+
geom_line()+
scale_x_time()
